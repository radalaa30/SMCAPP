{% extends 'base2.html.twig' %}

{% block title %}Modifier l’utilisateur{% endblock %}

{% block body %}
<div class="container-fluid">
  <div class="d-flex align-items-center justify-content-between mb-3">
    <h2 class="mb-0"><i class="fas fa-user-edit me-2"></i>Modifier l’utilisateur</h2>
    <div class="d-flex gap-2">
      <a href="{{ path('admin_users_index') }}" class="btn btn-outline-secondary btn-sm">
        <i class="fas fa-arrow-left"></i> Retour à la liste
      </a>

      {# bouton supprimer #}
      <form method="post"
            action="{{ path('admin_users_delete', {id: user.id}) }}"
            onsubmit="return confirm('Supprimer définitivement cet utilisateur ?');">
        <input type="hidden" name="_token" value="{{ csrf_token('delete_user_' ~ user.id) }}">
        <button class="btn btn-outline-danger btn-sm">
          <i class="fas fa-trash"></i> Supprimer
        </button>
      </form>
    </div>
  </div>

  {# Flash messages #}
  {% for label, messages in app.flashes %}
    {% for message in messages %}
      <div class="alert alert-{{ label }} alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Fermer"></button>
      </div>
    {% endfor %}
  {% endfor %}

  {% include 'admin/user/_form.html.twig' with {
    form: form,
    submit_label: 'Enregistrer les modifications',
    back_path: path('admin_users_index')
  } %}
</div>
{% endblock %}
